name: traefik
services:
  traefik:
    command:
      - --api.insecure=true
      - --providers.docker=true
      - --providers.docker.exposedbydefault=false
      - --entrypoints.web.address=:80
    container_name: traefik
    image: traefik:v2.10
    ports:
      - mode: ingress
        target: 80
        published: "88"
        protocol: tcp
      - mode: ingress
        target: 8080
        published: "8088"
        protocol: tcp
    volumes:
      - type: bind
        source: /var/run/docker.sock
        target: /var/run/docker.sock
        read_only: true
        bind:
          create_host_path: true
    devices: []
    cap_add: []
    environment: []
    networks:
      - default
    privileged: false
    restart: unless-stopped
    hostname: traefik
    cpu_shares: 90
    deploy:
      resources:
        limits:
          memory: 1865M
  whoami:
    container_name: simple-service
    image: traefik/whoami
    labels:
      traefik.enable: "true"
      traefik.http.routers.whoami.entrypoints: web
      traefik.http.routers.whoami.rule: Host(`whoami.localhost`)
    ports: []
    volumes: []
    devices: []
    cap_add: []
    command: []
    environment: []
    networks:
      - default
    privileged: false
    restart: unless-stopped
    hostname: simple-service
    cpu_shares: 90
    deploy:
      resources:
        limits:
          memory: 1865M
networks:
  default:
    name: traefik_default
x-casaos:
  hostname: ""
  scheme: http
  index: /
  port_map: "8088"
  author: self
  category: self
  icon: "https://upload.wikimedia.org/wikipedia/commons/1/1b/Traefik.logo.png"
  title:
    custom: Traefik
